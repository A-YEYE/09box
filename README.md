# 09BOX

## 시연영상
https://blog.naver.com/leeparaang/221661084206 

## 개발 환경
### FRONT END
-  jquery, ajax, html, js, css, bootstrap

### BACK END

- spring4, mybatis, java1.8, junit, tomcat

###  DATA BASE

- My SQL

### API
- 결제(I’mport, kakaoPay), 우편번호 검색(daum), 글 작성(Summernote)

## 사이트 설명
-	공동구매를 원하는 회원이 제품을 마감 날짜, 목표 수량, 상품 옵션과 함께 글을 작성합니다.
-	공동구매에 참여하고 싶은 회원은 물건을 구매합니다.
-	결제가 완료되면 팔린 개수는 구매한 만큼 수량이 올라갑니다.
-	매일 밤 12시가 되면 마감일에 해당하는 제품은 성공/실패가 판단됩니다.


## 주요 기능
###	회원가입
-	Ajax를 이용하여 아이디 중복체크를 구현하였습니다. 
-	비밀번호 암호화는 Bcrypt 알고리즘으로 처리하였고, 로그인 처리할 떄 DB에 저장된 암호화를 복호화 하게 하였습니다.

###	이메일 인증
-	javax.mail 라이브러리를 사용하여 회원가입된 email에 메일 발송하고 발송된 이메일에 링크를 걸어 해당 링크가 클릭되면, 회원관리 테이블에 사용가능한 회원으로 업데이트 하였습니다.


###	결제
-	클라이언트가 카카오페이 결제 버튼을 누르면 IMP request_pay라는 콜백함수를 호출되면서 구매자의 이름, 주소 등의 배송정보를 파라미터로 보냅니다. 

###	결제 정보 조회
-	I’mport 서버측에서 결제에 성공하면 고유 결제코드를 반환하게 됩니다.
-	클라이언트에서 payments/complete url로 고유 결제코드를 넘기면서 서버 측에 결제정보를 요청합니다. 
-	거래정보를 조회하기 위해서는 관리자 대시보드에서 발급받은 REST API키와 REST API Secret으로 토큰을 발급받은 후, 해당 토큰을 결제 정보를 조회 API 요청에 포함해야 합니다.
-	반환된 토큰과 결제코드를 파라미터로 payment_by_imp_uid를 호출하면 결제정보를 받을 수 있게 됩니다. 

###	정해진 시간마다 업무 수행
-	매일 12시에 성공/실패 여부를 판단하는 기능은 스케줄러라는 Annotation으로 구현하였습니다


